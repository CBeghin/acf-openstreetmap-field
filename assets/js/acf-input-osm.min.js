!function(e,t){var a=t.options,i={};i.MarkerList=Backbone.View.extend({}),i.MarkerEntry=Backbone.View.extend({tagName:"div",className:"osm-marker",events:{'click [data-name="locate-marker"]':"locate_marker",'click [data-name="remove-marker"]':"remove_marker",'change [id$="-marker-label"]':"update_marker_label"},is_default_label:function(){var e=this.$el.find('[id$="-marker-default-label"]').val();return this.$el.find('[id$="-marker-label"]').val()===e},initialize:function(e){return this.template=e.template,this.marker=e.marker,this},render:function(){return this.$el.html(this.template(this)),this._update_values_from_marker(),this},update_marker_label:function(t){return this.set_marker_label(e(t.target).val())},set_marker_label:function(t){return this.marker.unbindTooltip(),this.marker.bindTooltip(t),this.marker.options.title=t,e(this.marker._icon).attr("title",t),this},update_marker:function(e,t){return this.is_default_label()&&this.set_marker_label(t),this.$el.find('[id$="-marker-default-label"]').val(t),this._update_values_from_marker(),this},_update_values_from_marker:function(){var e=this.marker.getLatLng();return this.$el.find('[id$="-marker-lat"]').val(e.lat),this.$el.find('[id$="-marker-lng"]').val(e.lng),this.$el.find('[id$="-marker-label"]').val(this.marker.options.title),this},locate_marker:function(){return this.marker._map.flyTo(this.marker.getLatLng()),e(this.marker._icon).focus(),this},remove_marker:function(e){return e.preventDefault(),this.marker.remove(),this}}),i.field=Backbone.View.extend({map:null,geocoder:null,visible:null,events:{},$parent:function(){return this.$el.closest(".acf-field-settings,.acf-field-open-street-map")},$zoom:function(){return this.$parent().find('input[id$="-zoom"]')},$lat:function(){return this.$parent().find('input[id$="-center_lat"]')},$lng:function(){return this.$parent().find('input[id$="-center_lng"]')},$layerStore:function(){return this.$parent().find(".acf-osm-layers")},$results:function(){return this.$parent().find(".osm-results")},$markers:function(){return this.$parent().find(".osm-markers")},initialize:function(e){return this.map=e.map,this.update_map(),this.init_acf(),this.init_layers(),this.init_markers(),this.update_visible(),this},_get_geocoder_result_label:function(t,a){var i=!1;return t.length?e.each(t,function(e,t){return i=t.html?t.html:t.name,!1}):i=a.lat.toString()+", "+a.lng.toString(),e(i).text().replace(/^(\s+)/g,"").replace(/(\s+)$/g,"")},init_markers:function(){var t=this;this.icon=new L.DivIcon({html:"",className:"osm-marker-icon"}),this.init_geocode(),this.map.on("click",function(e){var a=e.latlng;t.geocoder.options.geocoder.reverse(e.latlng,t.map.getZoom(),function(e){var i=t._get_geocoder_result_label(e,a);t.add_marker(a,i)},t)}),this.map.on("layeradd",function(e){if(e.layer.constructor===L.Marker){var a=t.$markers().find('[data-id="__osm_marker_template__"]').html().split("__osm_marker_template__").join("<%= id %>"),r=new i.MarkerEntry({controller:this,marker:e.layer,id:acf.uniqid(),template:_.template(a)});r.render().$el.prependTo(t.$markers()),e.layer.setIcon(t.icon).on("click",function(e){this.remove()}).on("remove",function(e){r.$el.remove()}).on("dragend",function(e){t.geocoder.options.geocoder.reverse(this.getLatLng(),t.map.getZoom(),function(e){var a=this.getLatLng(),i=t._get_geocoder_result_label(e,a);r.update_marker(a,i)},this)}).dragging.enable()}}),e.each(this.$el.data().mapMarkers,function(e,a){L.marker(L.latLng(1*a.lat,1*a.lng),{title:a.label}).bindTooltip(a.label).addTo(t.map)})},add_marker:function(e,t){L.marker(e,{title:t,icon:this.icon}).bindTooltip(t).addTo(this.map)},layer_is_overlay:function(e,t){var a;return!!(t.options.opacity&&t.options.opacity<1)||(a=["^(OpenWeatherMap|OpenSeaMap)","OpenMapSurfer.AdminBounds","Stamen.Toner(Hybrid|Lines|Labels)","Acetate.(foreground|labels|roads)","HillShading","Hydda.RoadsAndLabels","^JusticeMap","OpenInfraMap.(Power|Telecom|Petroleum|Water)","OpenPtMap","OpenRailwayMap","OpenFireMap","SafeCast","CartoDB.DarkMatterOnlyLabels","CartoDB.PositronOnlyLabels"],null!==e.match("("+a.join("|")+")"))},init_layers:function(){var t=this,i=[],r={},n={},o={},l=function(e){return null===e},s=function(d,m){var c,u;if(_.isObject(m))return e.each(m,s);l(d)||(o[d]?(c=o[d],t.map.addLayer(c)):(u=a.layer_config[d.split(".")[0]]||{options:{}},c=L.tileLayer.provider(d,u.options),c.providerKey=d),t.layer_is_overlay(d,c)?n[d]=c:r[d]=c,-1!==i.indexOf(d)&&t.map.addLayer(c))};i=this.$el.data().mapLayers,this.$layerStore().length&&this.map.on("baselayerchange layeradd layerremove",function(e){if(e.layer.providerKey){var a=t.$layerStore(),i=t.$parent().find('[data-id="__osm_layer_template__"]');a.html(""),t.map.eachLayer(function(e){if(e.providerKey){var r=i.clone().removeAttr("data-id");r.val(e.providerKey),t.layer_is_overlay(e.providerKey,e)?a.append(r):a.prepend(r)}})}}),e.each(a.providers,s),this.$layerStore().length&&(this.layersControl=L.control.layers(r,n,{collapsed:!0,hideSingleBase:!0}).addTo(this.map))},init_geocode:function(){var t=this;this.map._controlCorners.above=e('<div class="acf-osm-above"></div>').insertBefore(this.$el).get(0),this.geocoder=L.Control.geocoder({collapsed:!1,position:"above",placeholder:"Search...",errorMessage:"Nothing found...",showResultIcons:!0,suggestMinLength:3,suggestTimeout:250,queryMinLength:3,defaultMarkGeocode:!1}).on("markgeocode",function(e){var a=t._get_geocoder_result_label([e.geocode],e.geocode.center);t.add_marker(e.geocode.center,a),t.map.fitBounds(e.geocode.bbox)}).addTo(this.map),L.DomEvent.addListener(this.geocoder._input,"keydown",function(e){13===e.keyCode&&e.preventDefault()},this.geocoder)},update_visible:function(){return this.visible===this.$el.is(":visible")?this:(this.visible=this.$el.is(":visible"),this.visible?(this.map.invalidateSize(),this.bind_events(),this):(this.unbind_events(),this))},init_acf:function(){var t=this,a=function(){t.update_visible()};acf.addAction("show",a),acf.addAction("hide",a),e(document).on("postbox-toggled",a),this.map.on("zoomend",function(e){t.map_zoomed.apply(t,[e])}),this.map.on("moveend",function(e){t.map_moved.apply(t,[e])})},unbind_events:function(){var e=this;e.$lat().off("blur"),e.$lng().off("blur"),e.$zoom().off("blur"),e.$zoom().off("keyup focus")},bind_events:function(){var e=this;e.$lat().on("blur",function(t){e.update_map()}),e.$lng().on("blur",function(t){e.update_map()}),e.$zoom().on("blur",function(t){e.update_map()})},update_map:function(){if(this.$lat().val()&&this.$lng().val()){var e=L.latLng(this.$lat().val(),this.$lng().val());this.map.setView(e,this.$zoom().val())}},map_moved:function(e){var t=this.map.getCenter();this.$lat().val(t.lat),this.$lng().val(t.lng)},map_zoomed:function(e){this.$zoom().val(this.map.getZoom())}}),e(document).on("acf-osm-map-init",function(e,t){e.preventDefault(),new i.field({el:e.target,map:t})})}(jQuery,acf_osm_admin);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1pbnB1dC1vc20uanMiXSwibmFtZXMiOlsiJCIsImFyZyIsIm9wdGlvbnMiLCJvc20iLCJNYXJrZXJMaXN0IiwiQmFja2JvbmUiLCJWaWV3IiwiZXh0ZW5kIiwiTWFya2VyRW50cnkiLCJ0YWdOYW1lIiwiY2xhc3NOYW1lIiwiZXZlbnRzIiwiY2xpY2sgW2RhdGEtbmFtZT1cImxvY2F0ZS1tYXJrZXJcIl0iLCJjbGljayBbZGF0YS1uYW1lPVwicmVtb3ZlLW1hcmtlclwiXSIsImNoYW5nZSBbaWQkPVwiLW1hcmtlci1sYWJlbFwiXSIsImlzX2RlZmF1bHRfbGFiZWwiLCJkZWZhdWx0X3ZhbCIsInRoaXMiLCIkZWwiLCJmaW5kIiwidmFsIiwiaW5pdGlhbGl6ZSIsIm9wdCIsInRlbXBsYXRlIiwibWFya2VyIiwicmVuZGVyIiwiaHRtbCIsIl91cGRhdGVfdmFsdWVzX2Zyb21fbWFya2VyIiwidXBkYXRlX21hcmtlcl9sYWJlbCIsImUiLCJzZXRfbWFya2VyX2xhYmVsIiwidGFyZ2V0IiwibGFiZWwiLCJ1bmJpbmRUb29sdGlwIiwiYmluZFRvb2x0aXAiLCJ0aXRsZSIsIl9pY29uIiwiYXR0ciIsInVwZGF0ZV9tYXJrZXIiLCJsYXRsbmciLCJnZXRMYXRMbmciLCJsYXQiLCJsbmciLCJsb2NhdGVfbWFya2VyIiwiX21hcCIsImZseVRvIiwiZm9jdXMiLCJyZW1vdmVfbWFya2VyIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJmaWVsZCIsIm1hcCIsImdlb2NvZGVyIiwidmlzaWJsZSIsIiRwYXJlbnQiLCJjbG9zZXN0IiwiJHpvb20iLCIkbGF0IiwiJGxuZyIsIiRsYXllclN0b3JlIiwiJHJlc3VsdHMiLCIkbWFya2VycyIsImNvbmYiLCJ1cGRhdGVfbWFwIiwiaW5pdF9hY2YiLCJpbml0X2xheWVycyIsImluaXRfbWFya2VycyIsInVwZGF0ZV92aXNpYmxlIiwiX2dldF9nZW9jb2Rlcl9yZXN1bHRfbGFiZWwiLCJsZW5ndGgiLCJlYWNoIiwiaSIsInJlc3VsdCIsIm5hbWUiLCJ0b1N0cmluZyIsInRleHQiLCJyZXBsYWNlIiwic2VsZiIsImljb24iLCJMIiwiRGl2SWNvbiIsImluaXRfZ2VvY29kZSIsIm9uIiwicmV2ZXJzZSIsImdldFpvb20iLCJhZGRfbWFya2VyIiwibGF5ZXIiLCJjb25zdHJ1Y3RvciIsIk1hcmtlciIsInNwbGl0Iiwiam9pbiIsImVudHJ5IiwiY29udHJvbGxlciIsImlkIiwiYWNmIiwidW5pcWlkIiwiXyIsInByZXBlbmRUbyIsInNldEljb24iLCJkcmFnZ2luZyIsImVuYWJsZSIsImRhdGEiLCJtYXBNYXJrZXJzIiwibWFya2VyRGF0YSIsImxhdExuZyIsImFkZFRvIiwibG5nbGF0IiwibGF5ZXJfaXNfb3ZlcmxheSIsImtleSIsInBhdHRlcm5zIiwib3BhY2l0eSIsIm1hdGNoIiwic2VsZWN0ZWRMYXllcnMiLCJiYXNlTGF5ZXJzIiwib3ZlcmxheXMiLCJtYXBMYXllcnMiLCJpc19vbWl0dGVkIiwic2V0dXBNYXAiLCJsYXllcl9jb25maWciLCJpc09iamVjdCIsImFkZExheWVyIiwidGlsZUxheWVyIiwicHJvdmlkZXIiLCJwcm92aWRlcktleSIsImluZGV4T2YiLCIkdGVtcGxhdGUiLCJlYWNoTGF5ZXIiLCIkbGF5ZXJJbnB1dCIsImNsb25lIiwicmVtb3ZlQXR0ciIsImFwcGVuZCIsInByZXBlbmQiLCJwcm92aWRlcnMiLCJsYXllcnNDb250cm9sIiwiY29udHJvbCIsImxheWVycyIsImNvbGxhcHNlZCIsImhpZGVTaW5nbGVCYXNlIiwiX2NvbnRyb2xDb3JuZXJzIiwiaW5zZXJ0QmVmb3JlIiwiZ2V0IiwiQ29udHJvbCIsInBvc2l0aW9uIiwicGxhY2Vob2xkZXIiLCJlcnJvck1lc3NhZ2UiLCJzaG93UmVzdWx0SWNvbnMiLCJzdWdnZXN0TWluTGVuZ3RoIiwic3VnZ2VzdFRpbWVvdXQiLCJxdWVyeU1pbkxlbmd0aCIsImRlZmF1bHRNYXJrR2VvY29kZSIsImdlb2NvZGUiLCJjZW50ZXIiLCJmaXRCb3VuZHMiLCJiYm94IiwiRG9tRXZlbnQiLCJhZGRMaXN0ZW5lciIsIl9pbnB1dCIsImtleUNvZGUiLCJpcyIsImludmFsaWRhdGVTaXplIiwiYmluZF9ldmVudHMiLCJ1bmJpbmRfZXZlbnRzIiwidG9nZ2xlX2NiIiwiYWRkQWN0aW9uIiwiZG9jdW1lbnQiLCJtYXBfem9vbWVkIiwiYXBwbHkiLCJtYXBfbW92ZWQiLCJvZmYiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZWwiLCJqUXVlcnkiLCJhY2Zfb3NtX2FkbWluIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFDLFFBTUFDLElBR0FBLEdBQUFDLFdBQUFDLFNBQUFDLEtBQUFDLFdBRUFKLEVBQUFLLFlBQUFILFNBQUFDLEtBQUFDLFFBQ0FFLFFBQUEsTUFDQUMsVUFBQSxhQUNBQyxRQUNBQyxvQ0FBQSxnQkFDQUMsb0NBQUEsZ0JBQ0FDLCtCQUFBLHVCQUVBQyxpQkFBQSxXQUNBLEdBQUFDLEdBQUFDLEtBQUFDLElBQUFDLEtBQUEsaUNBQUFDLEtBR0EsT0FGQUgsTUFBQUMsSUFBQUMsS0FBQSx5QkFBQUMsUUFFQUosR0FFQUssV0FBQSxTQUFBQyxHQUtBLE1BSEFMLE1BQUFNLFNBQUFELEVBQUFDLFNBQ0FOLEtBQUFPLE9BQUFGLEVBQUFFLE9BRUFQLE1BRUFRLE9BQUEsV0FHQSxNQUZBUixNQUFBQyxJQUFBUSxLQUFBVCxLQUFBTSxTQUFBTixPQUNBQSxLQUFBVSw2QkFDQVYsTUFFQVcsb0JBQUEsU0FBQUMsR0FDQSxNQUFBWixNQUFBYSxpQkFBQTlCLEVBQUE2QixFQUFBRSxRQUFBWCxRQUVBVSxpQkFBQSxTQUFBRSxHQU1BLE1BTEFmLE1BQUFPLE9BQUFTLGdCQUNBaEIsS0FBQU8sT0FBQVUsWUFBQUYsR0FFQWYsS0FBQU8sT0FBQXRCLFFBQUFpQyxNQUFBSCxFQUNBaEMsRUFBQWlCLEtBQUFPLE9BQUFZLE9BQUFDLEtBQUEsUUFBQUwsR0FDQWYsTUFFQXFCLGNBQUEsU0FBQUMsRUFBQVAsR0FhQSxNQVhBZixN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QXJELEVBQUFzQixHQUNBdEIsRUFBQW1CLGlCQUNBLEdBQUE3QyxHQUFBK0MsT0FBQXlILEdBQUE5SSxFQUFBRSxPQUFBb0IsSUFBQUEsT0FJQXlILE9BQUFDIiwiZmlsZSI6ImFjZi1pbnB1dC1vc20ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCAkLCBhcmcgKXtcblx0dmFyIG9wdGlvbnMgPSBhcmcub3B0aW9ucyxcblx0XHRyZXN1bHRfdHBsID0gJzxkaXYgdGFiaW5kZXg9XCI8JT0gZGF0YS5pICU+XCIgY2xhc3M9XCJvc20tcmVzdWx0XCI+J1xuXHRcdFx0KyAnPCU9IGRhdGEucmVzdWx0X3RleHQgJT4nXG5cdFx0XHQrICc8YnIgLz48c21hbGw+PCU9IGRhdGEucHJvcGVydGllcy5vc21fdmFsdWUgJT48L3NtYWxsPidcblx0XHRcdCsgJzwvZGl2Pic7XG5cblx0dmFyIG9zbSA9IHtcblx0fTtcblxuXHRvc20uTWFya2VyTGlzdCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblx0fSlcblx0b3NtLk1hcmtlckVudHJ5ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXHRcdHRhZ05hbWU6ICdkaXYnLFxuXHRcdGNsYXNzTmFtZTonb3NtLW1hcmtlcicsXG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtbmFtZT1cImxvY2F0ZS1tYXJrZXJcIl0nIDogJ2xvY2F0ZV9tYXJrZXInLFxuXHRcdFx0J2NsaWNrIFtkYXRhLW5hbWU9XCJyZW1vdmUtbWFya2VyXCJdJyA6ICdyZW1vdmVfbWFya2VyJyxcblx0XHRcdCdjaGFuZ2UgW2lkJD1cIi1tYXJrZXItbGFiZWxcIl0nXHRcdDogJ3VwZGF0ZV9tYXJrZXJfbGFiZWwnLFxuXHRcdH0sXG5cdFx0aXNfZGVmYXVsdF9sYWJlbDogZnVuY3Rpb24oKXtcblx0XHRcdHZhciBkZWZhdWx0X3ZhbCA9IHRoaXMuJGVsLmZpbmQoJ1tpZCQ9XCItbWFya2VyLWRlZmF1bHQtbGFiZWxcIl0nKS52YWwoKSxcblx0XHRcdFx0Y3VycmVudF92YWwgPSB0aGlzLiRlbC5maW5kKCdbaWQkPVwiLW1hcmtlci1sYWJlbFwiXScpLnZhbCgpO1xuXG5cdFx0XHRyZXR1cm4gY3VycmVudF92YWwgPT09IGRlZmF1bHRfdmFsO1xuXHRcdH0sXG5cdFx0aW5pdGlhbGl6ZTpmdW5jdGlvbihvcHQpe1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0dGhpcy50ZW1wbGF0ZSA9IG9wdC50ZW1wbGF0ZTtcblx0XHRcdHRoaXMubWFya2VyID0gb3B0Lm1hcmtlcjtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZW5kZXI6ZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMuJGVsLmh0bWwoIHRoaXMudGVtcGxhdGUoIHRoaXMgKSApO1xuXHRcdFx0dGhpcy5fdXBkYXRlX3ZhbHVlc19mcm9tX21hcmtlcigpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHR1cGRhdGVfbWFya2VyX2xhYmVsOmZ1bmN0aW9uKGUpIHtcblx0XHRcdHJldHVybiB0aGlzLnNldF9tYXJrZXJfbGFiZWwoICQoZS50YXJnZXQpLnZhbCgpICk7XG5cdFx0fSxcblx0XHRzZXRfbWFya2VyX2xhYmVsOmZ1bmN0aW9uKGxhYmVsKSB7XG5cdFx0XHR0aGlzLm1hcmtlci51bmJpbmRUb29sdGlwKCk7XG5cdFx0XHR0aGlzLm1hcmtlci5iaW5kVG9vbHRpcChsYWJlbCk7XG5cblx0XHRcdHRoaXMubWFya2VyLm9wdGlvbnMudGl0bGUgPSBsYWJlbDtcblx0XHRcdCQoIHRoaXMubWFya2VyLl9pY29uICkuYXR0ciggJ3RpdGxlJywgbGFiZWwgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0dXBkYXRlX21hcmtlcjpmdW5jdGlvbiggbGF0bG5nLCBsYWJlbCApIHtcblxuXHRcdFx0aWYgKCB0aGlzLmlzX2RlZmF1bHRfbGFiZWwoKSApIHtcblx0XHRcdFx0Ly8gdXBkYXRlIG1hcmtlciBsYWJlbHNcblx0XHRcdFx0dGhpcy5zZXRfbWFya2VyX2xhYmVsKCBsYWJlbCApO1xuXHRcdFx0XHQvLyB1cGRhdGUgbWFya2VyIGxhYmVsIGlucHV0XG5cdFx0XHR9XG5cblxuXHRcdFx0dGhpcy4kZWwuZmluZCgnW2lkJD1cIi1tYXJrZXItZGVmYXVsdC1sYWJlbFwiXScpLnZhbCggbGFiZWwgKTtcblxuXHRcdFx0dGhpcy5fdXBkYXRlX3ZhbHVlc19mcm9tX21hcmtlcigpO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdF91cGRhdGVfdmFsdWVzX2Zyb21fbWFya2VyOiBmdW5jdGlvbiggKSB7XG5cdFx0XHR2YXIgbGF0bG5nID0gdGhpcy5tYXJrZXIuZ2V0TGF0TG5nKCk7XG5cdFx0XHR0aGlzLiRlbC5maW5kKCdbaWQkPVwiLW1hcmtlci1sYXRcIl0nKS52YWwoIGxhdGxuZy5sYXQgKTtcblx0XHRcdHRoaXMuJGVsLmZpbmQoJ1tpZCQ9XCItbWFya2VyLWxuZ1wiXScpLnZhbCggbGF0bG5nLmxuZyApO1xuXHRcdFx0dGhpcy4kZWwuZmluZCgnW2lkJD1cIi1tYXJrZXItbGFiZWxcIl0nKS52YWwoIHRoaXMubWFya2VyLm9wdGlvbnMudGl0bGUgKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cblx0XHRsb2NhdGVfbWFya2VyOmZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLm1hcmtlci5fbWFwLmZseVRvKCB0aGlzLm1hcmtlci5nZXRMYXRMbmcoKSApO1xuXHRcdFx0JCh0aGlzLm1hcmtlci5faWNvbikuZm9jdXMoKVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZW1vdmVfbWFya2VyOmZ1bmN0aW9uKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuXHRcdFx0dGhpcy5tYXJrZXIucmVtb3ZlKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH0pO1xuXG5cdG9zbS5maWVsZCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcblx0XHQvKlxuXHRcdHRvZG86XG5cdFx0LSBNYXAgTGF5ZXIgc2VsZWN0b3Jcblx0XHQtIHNldCAvIHVuc2V0IG1hcmtlclxuXHRcdCovXG5cblx0XHRtYXA6IG51bGwsXG5cdFx0Z2VvY29kZXI6IG51bGwsXG5cdFx0dmlzaWJsZTogbnVsbCxcblx0XHRldmVudHM6e1xuXHRcdH0sXG5cblx0XHQkcGFyZW50OmZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gdGhpcy4kZWwuY2xvc2VzdCgnLmFjZi1maWVsZC1zZXR0aW5ncywuYWNmLWZpZWxkLW9wZW4tc3RyZWV0LW1hcCcpXG5cdFx0fSxcblx0XHQkem9vbSA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuJHBhcmVudCgpLmZpbmQoJ2lucHV0W2lkJD1cIi16b29tXCJdJyk7XG5cdFx0fSxcblx0XHQkbGF0IDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy4kcGFyZW50KCkuZmluZCgnaW5wdXRbaWQkPVwiLWNlbnRlcl9sYXRcIl0nKTtcblx0XHR9LFxuXHRcdCRsbmcgOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLiRwYXJlbnQoKS5maW5kKCdpbnB1dFtpZCQ9XCItY2VudGVyX2xuZ1wiXScpO1xuXHRcdH0sXG5cdFx0JGxheWVyU3RvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuJHBhcmVudCgpLmZpbmQoJy5hY2Ytb3NtLWxheWVycycpO1xuXHRcdH0sXG5cdFx0JHJlc3VsdHMgOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLiRwYXJlbnQoKS5maW5kKCcub3NtLXJlc3VsdHMnKTtcblx0XHR9LFxuXHRcdCRtYXJrZXJzOmZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gdGhpcy4kcGFyZW50KCkuZmluZCgnLm9zbS1tYXJrZXJzJyk7XG5cdFx0fSxcblx0XHRpbml0aWFsaXplOmZ1bmN0aW9uKGNvbmYpIHtcblxuXHRcdFx0dGhpcy5tYXBcdFx0PSBjb25mLm1hcDtcblxuXHRcdFx0dGhpcy51cGRhdGVfbWFwKCk7IC8vIHNldCBtYXAgdG8gaW5wdXQgdmFsdWVzXG5cblx0XHRcdHRoaXMuaW5pdF9hY2YoKTtcblxuXHRcdFx0dGhpcy5pbml0X2xheWVycygpO1xuXG5cdFx0XHR0aGlzLmluaXRfbWFya2VycygpO1xuXG5cdFx0XHR0aGlzLnVwZGF0ZV92aXNpYmxlKCk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0X2dldF9nZW9jb2Rlcl9yZXN1bHRfbGFiZWw6ZnVuY3Rpb24oIGUsIGxhdGxuZyApIHtcblx0XHRcdHZhciBsYWJlbCA9IGZhbHNlO1xuXG5cdFx0XHRpZiAoICEgZS5sZW5ndGggKSB7XG5cdFx0XHRcdGxhYmVsID0gbGF0bG5nLmxhdC50b1N0cmluZygpICsgJywgJyArIGxhdGxuZy5sbmcudG9TdHJpbmcoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQuZWFjaCggZSwgZnVuY3Rpb24oIGksIHJlc3VsdCApIHtcblx0XHRcdFx0XHRpZiAoICEhIHJlc3VsdC5odG1sICkge1xuXHRcdFx0XHRcdFx0bGFiZWwgPSByZXN1bHQuaHRtbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bGFiZWwgPSByZXN1bHQubmFtZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAkKGxhYmVsKS50ZXh0KCkucmVwbGFjZSgvXihcXHMrKS9nLCcnKS5yZXBsYWNlKC8oXFxzKykkL2csJycpO1xuXHRcdH0sXG5cdFx0aW5pdF9tYXJrZXJzOmZ1bmN0aW9uKCl7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0dGhpcy5pY29uID0gbmV3IEwuRGl2SWNvbih7XG5cdFx0XHRcdGh0bWw6ICcnLFxuXHRcdFx0XHRjbGFzc05hbWU6J29zbS1tYXJrZXItaWNvbidcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLmluaXRfZ2VvY29kZSgpO1xuXG5cdFx0XHR0aGlzLm1hcC5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0dmFyIGxhdGxuZyA9IGUubGF0bG5nO1xuXHRcdFx0XHRzZWxmLmdlb2NvZGVyLm9wdGlvbnMuZ2VvY29kZXIucmV2ZXJzZShlLmxhdGxuZyxzZWxmLm1hcC5nZXRab29tKCksZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0dmFyIGxhYmVsID0gc2VsZi5fZ2V0X2dlb2NvZGVyX3Jlc3VsdF9sYWJlbCggZSwgbGF0bG5nICk7XG5cblx0XHRcdFx0XHRzZWxmLmFkZF9tYXJrZXIoIGxhdGxuZywgbGFiZWwgKTtcblx0XHRcdFx0fSxzZWxmKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLm1hcC5vbiggJ2xheWVyYWRkJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdGlmICggZS5sYXllci5jb25zdHJ1Y3RvciAhPT0gTC5NYXJrZXIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG1hcmtlciBhZGRlZFxuXHRcdFx0XHR2YXIgdGVtcGxhdGUgPSBzZWxmLiRtYXJrZXJzKCkuZmluZCgnW2RhdGEtaWQ9XCJfX29zbV9tYXJrZXJfdGVtcGxhdGVfX1wiXScpLmh0bWwoKS5zcGxpdCgnX19vc21fbWFya2VyX3RlbXBsYXRlX18nKS5qb2luKCAnPCU9IGlkICU+JyApLFxuXHRcdFx0XHRcdGVudHJ5ID0gbmV3IG9zbS5NYXJrZXJFbnRyeSh7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiB0aGlzLFxuXHRcdFx0XHRcdFx0bWFya2VyOiBlLmxheWVyLFxuXHRcdFx0XHRcdFx0aWQ6IGFjZi51bmlxaWQoKSwgLy9zZWxmLiRtYXJrZXJzKCkuY2hpbGRyZW4oKS5sZW5ndGgsXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZTogXy50ZW1wbGF0ZSggdGVtcGxhdGUgKSxcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRlbnRyeS5yZW5kZXIoKS4kZWwucHJlcGVuZFRvKCBzZWxmLiRtYXJrZXJzKCkgKTtcblxuXHRcdFx0XHRlLmxheWVyXG5cdFx0XHRcdFx0LnNldEljb24oIHNlbGYuaWNvbiApXG5cdFx0XHRcdFx0Lm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Lm9uKCdyZW1vdmUnLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdFx0ZW50cnkuJGVsLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Lm9uKCdkcmFnZW5kJyxmdW5jdGlvbihlKXtcblxuXHRcdFx0XHRcdFx0c2VsZi5nZW9jb2Rlci5vcHRpb25zLmdlb2NvZGVyLnJldmVyc2UodGhpcy5nZXRMYXRMbmcoKSxzZWxmLm1hcC5nZXRab29tKCksZnVuY3Rpb24oZSl7XG5cblx0XHRcdFx0XHRcdFx0dmFyIGxhdGxuZyA9IHRoaXMuZ2V0TGF0TG5nKCksXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWwgPSBzZWxmLl9nZXRfZ2VvY29kZXJfcmVzdWx0X2xhYmVsKCBlLCBsYXRsbmcgKTtcblx0XHRcdFx0XHRcdFx0ZW50cnkudXBkYXRlX21hcmtlciggbGF0bG5nLCBsYWJlbCApO1xuXG5cdFx0XHRcdFx0XHR9LCB0aGlzICk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZHJhZ2dpbmcuZW5hYmxlKCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdCQuZWFjaCggdGhpcy4kZWwuZGF0YSgpLm1hcE1hcmtlcnMsZnVuY3Rpb24oIGksIG1hcmtlckRhdGEgKSB7XG5cdFx0XHRcdC8vIGFkZCBtYXJrZXJzXG5cdFx0XHRcdHZhciBtYXJrZXIgPSBMLm1hcmtlciggTC5sYXRMbmcoIG1hcmtlckRhdGEubGF0ICogMSwgbWFya2VyRGF0YS5sbmcgKiAxICksIHtcblx0XHRcdFx0XHRcdHRpdGxlOiBtYXJrZXJEYXRhLmxhYmVsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYmluZFRvb2x0aXAoIG1hcmtlckRhdGEubGFiZWwgKVxuXHRcdFx0XHRcdC5hZGRUbyggc2VsZi5tYXAgKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9LFxuXHRcdGFkZF9tYXJrZXI6ZnVuY3Rpb24oIGxuZ2xhdCwgbGFiZWwgKXtcblx0XHRcdEwubWFya2VyKGxuZ2xhdCx7XG5cdFx0XHRcdHRpdGxlOiBsYWJlbCxcblx0XHRcdFx0aWNvbjogdGhpcy5pY29uLFxuXHRcdFx0fSlcblx0XHRcdFx0LmJpbmRUb29sdGlwKCBsYWJlbCApXG5cdFx0XHRcdC5hZGRUbyggdGhpcy5tYXAgKTtcblx0XHR9LFxuXHRcdGxheWVyX2lzX292ZXJsYXk6IGZ1bmN0aW9uKCAga2V5LCBsYXllciApIHtcblx0XHRcdHZhciBwYXR0ZXJucztcblxuXHRcdFx0aWYgKCBsYXllci5vcHRpb25zLm9wYWNpdHkgJiYgbGF5ZXIub3B0aW9ucy5vcGFjaXR5IDwgMSApIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRwYXR0ZXJucyA9IFsnXihPcGVuV2VhdGhlck1hcHxPcGVuU2VhTWFwKScsXG5cdFx0XHRcdCdPcGVuTWFwU3VyZmVyLkFkbWluQm91bmRzJyxcblx0XHRcdFx0J1N0YW1lbi5Ub25lcihIeWJyaWR8TGluZXN8TGFiZWxzKScsXG5cdFx0XHRcdCdBY2V0YXRlLihmb3JlZ3JvdW5kfGxhYmVsc3xyb2FkcyknLFxuXHRcdFx0XHQnSGlsbFNoYWRpbmcnLFxuXHRcdFx0XHQnSHlkZGEuUm9hZHNBbmRMYWJlbHMnLFxuXHRcdFx0XHQnXkp1c3RpY2VNYXAnLFxuXHRcdFx0XHQnT3BlbkluZnJhTWFwLihQb3dlcnxUZWxlY29tfFBldHJvbGV1bXxXYXRlciknLFxuXHRcdFx0XHQnT3BlblB0TWFwJyxcblx0XHRcdFx0J09wZW5SYWlsd2F5TWFwJyxcblx0XHRcdFx0J09wZW5GaXJlTWFwJyxcblx0XHRcdFx0J1NhZmVDYXN0Jyxcblx0XHRcdFx0J0NhcnRvREIuRGFya01hdHRlck9ubHlMYWJlbHMnLFxuXHRcdFx0XHQnQ2FydG9EQi5Qb3NpdHJvbk9ubHlMYWJlbHMnXG5cdFx0XHRdO1xuXHRcdFx0cmV0dXJuIGtleS5tYXRjaCgnKCcgKyBwYXR0ZXJucy5qb2luKCd8JykgKyAnKScpICE9PSBudWxsO1xuXHRcdH0sXG5cdFx0aW5pdF9sYXllcnM6ZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHNlbGVjdGVkTGF5ZXJzID0gW10sXG5cdFx0XHRcdGJhc2VMYXllcnMgPSB7fSxcblx0XHRcdFx0b3ZlcmxheXMgPSB7fSxcblx0XHRcdFx0bWFwTGF5ZXJzID0ge30sXG5cdFx0XHRcdGlzX29taXR0ZWQgPSBmdW5jdGlvbihrZXkpIHtcblxuXHRcdFx0XHRcdHJldHVybiBrZXkgPT09IG51bGw7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldHVwTWFwID0gZnVuY3Rpb24oIGtleSwgdmFsICl7XG5cdFx0XHRcdFx0dmFyIGxheWVyLCBsYXllcl9jb25maWc7XG5cdFx0XHRcdFx0aWYgKCBfLmlzT2JqZWN0KHZhbCkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJC5lYWNoKCB2YWwsIHNldHVwTWFwICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBpc19vbWl0dGVkKGtleSkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggISEgbWFwTGF5ZXJzWyBrZXkgXSApIHtcblx0XHRcdFx0XHRcdGxheWVyID0gbWFwTGF5ZXJzWyBrZXkgXTtcblx0XHRcdFx0XHRcdHNlbGYubWFwLmFkZExheWVyKGxheWVyKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsYXllcl9jb25maWcgPSBvcHRpb25zLmxheWVyX2NvbmZpZ1sga2V5LnNwbGl0KCcuJylbMF0gXSB8fCB7b3B0aW9uczp7fX07XG5cdFx0XHRcdFx0XHRsYXllciA9IEwudGlsZUxheWVyLnByb3ZpZGVyKCBrZXksIGxheWVyX2NvbmZpZy5vcHRpb25zICk7XG5cdFx0XHRcdFx0XHRsYXllci5wcm92aWRlcktleSA9IGtleTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIHNlbGYubGF5ZXJfaXNfb3ZlcmxheSgga2V5LCBsYXllciApICkge1xuXHRcdFx0XHRcdFx0b3ZlcmxheXNba2V5XSA9IGxheWVyO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRiYXNlTGF5ZXJzW2tleV0gPSBsYXllcjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIHNlbGVjdGVkTGF5ZXJzLmluZGV4T2YoIGtleSApICE9PSAtMSApIHtcblx0XHRcdFx0XHRcdHNlbGYubWFwLmFkZExheWVyKGxheWVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdHNlbGVjdGVkTGF5ZXJzID0gdGhpcy4kZWwuZGF0YSgpLm1hcExheWVycztcblxuXG5cdFx0XHRpZiAoIHRoaXMuJGxheWVyU3RvcmUoKS5sZW5ndGggKSB7XG5cdFx0XHRcdHRoaXMubWFwLm9uKCAnYmFzZWxheWVyY2hhbmdlIGxheWVyYWRkIGxheWVycmVtb3ZlJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0aWYgKCAhIGUubGF5ZXIucHJvdmlkZXJLZXkpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dmFyICRsYXllclN0b3JlID0gc2VsZi4kbGF5ZXJTdG9yZSgpLFxuXHRcdFx0XHRcdFx0JHRlbXBsYXRlID0gc2VsZi4kcGFyZW50KCkuZmluZCgnW2RhdGEtaWQ9XCJfX29zbV9sYXllcl90ZW1wbGF0ZV9fXCJdJyk7XG5cblx0XHRcdFx0XHQkbGF5ZXJTdG9yZS5odG1sKCcnKTtcblxuXHRcdFx0XHRcdHNlbGYubWFwLmVhY2hMYXllcihmdW5jdGlvbihsYXllcikge1xuXHRcdFx0XHRcdFx0aWYgKCAhIGxheWVyLnByb3ZpZGVyS2V5ICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR2YXIgJGxheWVySW5wdXQgPSAkdGVtcGxhdGUuY2xvbmUoKS5yZW1vdmVBdHRyKCdkYXRhLWlkJyk7XG5cdFx0XHRcdFx0XHQkbGF5ZXJJbnB1dC52YWwoIGxheWVyLnByb3ZpZGVyS2V5ICk7XG5cblx0XHRcdFx0XHRcdGlmICggc2VsZi5sYXllcl9pc19vdmVybGF5KCBsYXllci5wcm92aWRlcktleSwgbGF5ZXIgKSApIHtcblx0XHRcdFx0XHRcdFx0JGxheWVyU3RvcmUuYXBwZW5kKCAkbGF5ZXJJbnB1dCApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGxheWVyU3RvcmUucHJlcGVuZCggJGxheWVySW5wdXQgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblxuXHRcdFx0JC5lYWNoKCBvcHRpb25zLnByb3ZpZGVycywgc2V0dXBNYXAgKTtcblxuXHRcdFx0Ly8gLi4uIG5vIGxheWVyIGVkaXRpbmcgYWxsb3dlZFxuXHRcdFx0aWYgKCB0aGlzLiRsYXllclN0b3JlKCkubGVuZ3RoICkge1xuXHRcdFx0XHR0aGlzLmxheWVyc0NvbnRyb2wgPSBMLmNvbnRyb2wubGF5ZXJzKCBiYXNlTGF5ZXJzLCBvdmVybGF5cywge1xuXHRcdFx0XHRcdGNvbGxhcHNlZDogdHJ1ZSxcblx0XHRcdFx0XHRoaWRlU2luZ2xlQmFzZTogdHJ1ZSxcblx0XHRcdFx0fSkuYWRkVG8odGhpcy5tYXApO1xuXHRcdFx0fVxuXG5cblx0XHR9LFxuXHRcdGluaXRfZ2VvY29kZTpmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLm1hcC5fY29udHJvbENvcm5lcnNbJ2Fib3ZlJ10gPSAkKCc8ZGl2IGNsYXNzPVwiYWNmLW9zbS1hYm92ZVwiPjwvZGl2PicpLmluc2VydEJlZm9yZSggdGhpcy4kZWwgKS5nZXQoMCk7XG5cblx0XHRcdHRoaXMuZ2VvY29kZXIgPSBMLkNvbnRyb2wuZ2VvY29kZXIoe1xuXHRcdFx0XHRjb2xsYXBzZWQ6IGZhbHNlLFxuXHRcdFx0XHRwb3NpdGlvbjonYWJvdmUnLFxuXHRcdFx0XHRwbGFjZWhvbGRlcjonU2VhcmNoLi4uJyxcblx0XHRcdFx0ZXJyb3JNZXNzYWdlOidOb3RoaW5nIGZvdW5kLi4uJyxcblx0XHRcdFx0c2hvd1Jlc3VsdEljb25zOnRydWUsXG5cdFx0XHRcdHN1Z2dlc3RNaW5MZW5ndGg6Myxcblx0XHRcdFx0c3VnZ2VzdFRpbWVvdXQ6MjUwLFxuXHRcdFx0XHRxdWVyeU1pbkxlbmd0aDozLFxuXHRcdFx0XHRkZWZhdWx0TWFya0dlb2NvZGU6ZmFsc2UsXG5cdFx0XHR9KVxuXHRcdFx0Lm9uKCdtYXJrZ2VvY29kZScsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coZS5nZW9jb2RlLmNuZXRlcik7cmV0dXJuO1xuXHRcdFx0XHR2YXIgbGFiZWwgPSBzZWxmLl9nZXRfZ2VvY29kZXJfcmVzdWx0X2xhYmVsKCBbZS5nZW9jb2RlXSwgZS5nZW9jb2RlLmNlbnRlciApO1xuXG5cdFx0XHRcdHNlbGYuYWRkX21hcmtlciggZS5nZW9jb2RlLmNlbnRlciwgbGFiZWwgKTtcblx0XHRcdFx0Lypcblx0XHRcdFx0c2VsZi5tYXAuZmx5VG9Cb3VuZHMoZS5nZW9jb2RlLmJib3gpO1xuXHRcdFx0XHQvKi9cblx0XHRcdFx0c2VsZi5tYXAuZml0Qm91bmRzKGUuZ2VvY29kZS5iYm94KTtcblx0XHRcdFx0Ly8qL1xuXG4vL1x0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fSlcblx0XHRcdC5hZGRUbyggdGhpcy5tYXAgKTtcblxuXHRcdFx0Ly8gcHJldmVudCB3cCBwb3N0IGZvcm0gZnJvbSBiZWluZyBzdWJtaXR0ZWRcblx0XHRcdEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIodGhpcy5nZW9jb2Rlci5faW5wdXQsICdrZXlkb3duJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdGlmICggZS5rZXlDb2RlID09PSAxMyApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMuZ2VvY29kZXIgKTtcblx0XHR9LFxuXHRcdHVwZGF0ZV92aXNpYmxlOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYgKCB0aGlzLnZpc2libGUgPT09IHRoaXMuJGVsLmlzKCc6dmlzaWJsZScpICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblxuXHRcdFx0dGhpcy52aXNpYmxlID0gdGhpcy4kZWwuaXMoJzp2aXNpYmxlJyk7XG5cblx0XHRcdGlmICggdGhpcy52aXNpYmxlICkge1xuXHRcdFx0XHR0aGlzLm1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuXHRcdFx0XHR0aGlzLmJpbmRfZXZlbnRzKCk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy51bmJpbmRfZXZlbnRzKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGluaXRfYWNmOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0dG9nZ2xlX2NiID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Ly8gbm8gY2hhbmdlXG5cdFx0XHRcdFx0c2VsZi51cGRhdGVfdmlzaWJsZSgpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHQvLyBleHBhbmQvY29sbGFwc2UgYWNmIHNldHRpbmdcblx0XHRcdGFjZi5hZGRBY3Rpb24oICdzaG93JywgdG9nZ2xlX2NiICk7XG5cdFx0XHRhY2YuYWRkQWN0aW9uKCAnaGlkZScsIHRvZ2dsZV9jYiApO1xuXG5cblxuXHRcdFx0Ly8gZXhwYW5kIGFjZiByZXBlYXRlclxuXHRcdFx0Ly8gLi4uXG5cblx0XHRcdC8vIGV4cGFuZCBhY2YgbGF5b3V0XG5cdFx0XHQvLyAuLi5cblxuXHRcdFx0Ly8gZXhwYW5kIHdwIG1ldGFib3hcblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdwb3N0Ym94LXRvZ2dsZWQnLHRvZ2dsZV9jYilcblxuXG5cdFx0XHR0aGlzLm1hcC5vbignem9vbWVuZCcsIGZ1bmN0aW9uKGUpeyBzZWxmLm1hcF96b29tZWQuYXBwbHkoIHNlbGYsIFtlXSApOyB9ICk7XG5cdFx0XHR0aGlzLm1hcC5vbignbW92ZWVuZCcsIGZ1bmN0aW9uKGUpeyBzZWxmLm1hcF9tb3ZlZC5hcHBseSggc2VsZiwgW2VdICk7IH0gKTtcblxuXHRcdH0sXG5cdFx0dW5iaW5kX2V2ZW50czpmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYuJGxhdCgpLm9mZignYmx1cicpO1xuXHRcdFx0c2VsZi4kbG5nKCkub2ZmKCdibHVyJyk7XG5cdFx0XHRzZWxmLiR6b29tKCkub2ZmKCdibHVyJyk7XG5cdFx0XHRzZWxmLiR6b29tKCkub2ZmKCdrZXl1cCBmb2N1cycpO1xuXHRcdH0sXG5cdFx0YmluZF9ldmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLiRsYXQoKS5vbignYmx1cicsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHNlbGYudXBkYXRlX21hcCgpO1xuXHRcdFx0fSk7XG5cdFx0XHRzZWxmLiRsbmcoKS5vbignYmx1cicsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHNlbGYudXBkYXRlX21hcCgpO1xuXHRcdFx0fSk7XG5cdFx0XHRzZWxmLiR6b29tKCkub24oJ2JsdXInLGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRzZWxmLnVwZGF0ZV9tYXAoKTtcblx0XHRcdH0pO1xuXHRcdFx0Ly8gc2VsZi4kYWRkcmVzcygpLm9uKCdrZXl1cCBmb2N1cycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly8gXHRzZWxmLnNlYXJjaChlKTtcblx0XHRcdC8vIH0gKTtcblxuXG4vL1x0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMuJGFkZHJlc3MsICdrZXl1cCBmb2N1cycsIHRoaXMuc2VhcmNoICk7XG5cblx0XHRcdC8vIHRoaXMuJHRpbGVzLm9uKCdjaGFuZ2UnLCBkb19sYXllcnMgKVxuXHRcdFx0Ly8gXHQucHJldignaW5wdXQnKS5vbignY2hhbmdlJywgZG9fbGF5ZXJzICk7XG5cblx0XHR9LFxuXHRcdHVwZGF0ZV9tYXA6ZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICEgdGhpcy4kbGF0KCkudmFsKCkgfHwgISB0aGlzLiRsbmcoKS52YWwoKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGxhdGxuZyA9IEwubGF0TG5nKCB0aGlzLiRsYXQoKS52YWwoKSwgdGhpcy4kbG5nKCkudmFsKCkgKTtcblx0XHRcdHRoaXMubWFwLnNldFZpZXcoIGxhdGxuZywgIHRoaXMuJHpvb20oKS52YWwoKSApO1xuXHRcdH0sXG5cdFx0bWFwX21vdmVkOmZ1bmN0aW9uKGUpe1xuXHRcdFx0dmFyIGNlbnRlciA9IHRoaXMubWFwLmdldENlbnRlcigpO1xuXHRcdFx0dGhpcy4kbGF0KCkudmFsKGNlbnRlci5sYXQpO1xuXHRcdFx0dGhpcy4kbG5nKCkudmFsKGNlbnRlci5sbmcpO1xuXHRcdH0sXG5cdFx0bWFwX3pvb21lZDpmdW5jdGlvbihlKXtcblx0XHRcdHRoaXMuJHpvb20oKS52YWwoIHRoaXMubWFwLmdldFpvb20oKSApO1xuXHRcdH0sXG5cdH0pO1xuXG5cdC8qXG5cdCAqICByZWFkeSBhcHBlbmQgKEFDRjUpXG5cdCAqXG5cdCAqICBUaGVzZSBhcmUgMiBldmVudHMgd2hpY2ggYXJlIGZpcmVkIGR1cmluZyB0aGUgcGFnZSBsb2FkXG5cdCAqICByZWFkeSA9IG9uIHBhZ2UgbG9hZCBzaW1pbGFyIHRvICQoZG9jdW1lbnQpLnJlYWR5KClcblx0ICogIGFwcGVuZCA9IG9uIG5ldyBET00gZWxlbWVudHMgYXBwZW5kZWQgdmlhIHJlcGVhdGVyIGZpZWxkXG5cdCAqXG5cdCAqICBAdHlwZVx0ZXZlbnRcblx0ICogIEBkYXRlXHQyMC8wNy8xM1xuXHQgKlxuXHQgKiAgQHBhcmFtXHQkZWwgKGpRdWVyeSBzZWxlY3Rpb24pIHRoZSBqUXVlcnkgZWxlbWVudCB3aGljaCBjb250YWlucyB0aGUgQUNGIGZpZWxkc1xuXHQgKiAgQHJldHVyblx0bi9hXG5cdCAqL1xuXHQkKGRvY3VtZW50KS5vbignYWNmLW9zbS1tYXAtaW5pdCcsZnVuY3Rpb24oIGUsIG1hcCApIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0bmV3IG9zbS5maWVsZCggeyBlbDogZS50YXJnZXQsIG1hcDogbWFwIH0gKTtcblx0fSk7XG5cblxufSkoIGpRdWVyeSwgYWNmX29zbV9hZG1pbiApO1xuIl19
